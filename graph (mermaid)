---
config:
  layout: elk
  theme: neutral
---
classDiagram
direction TB

    class FACT_SALES {
        +int sales_key PK
        +int order_key FK
        +int customer_key FK
        +int product_key FK
        +int date_key FK
        +int location_key FK
        +int quantity_sold
        +decimal item_price
        +decimal discount_amount
    }
    
    class FACT_PAYMENTS {
        +int payment_key PK
        +int order_key FK
        +int customer_key FK
        +int date_key FK
        +decimal discount_amount
        +string payment_method
    }
    
    class FACT_USER_SESSIONS {
        +int session_key PK
        +string session_id NK
        +int customer_key FK
        +int date_key FK
        +int product_views
        +int add_to_carts
        +int session_duration_sec
        +string device_type
    }

 
    class DIM_CUSTOMER {
        +int customer_key PK
        +string user_id NK
        +date registration_date
        +string customer_city
        +string customer_tier
        +int lifetime_orders
        +decimal lifetime_spend
        +string account_status
        +date valid_from
        +date valid_to
    }
    
    class DIM_PRODUCT {
        +int product_key PK
        +string product_id NK
        +string merchant_id
        +string product_name
        +string brand
        +decimal current_price

    }
    
    class DIM_LOCATION {
        +int location_key PK
        +string address_hash NK
        +string city_name
        +string district_name
        +string region
    }
    
    class DIM_DATETIME {
        +int date_key PK
        +date full_date
        +int year_number
        +int month_number
        +int day_of_month
        +string day_of_week
    }
    
    class DIM_ORDER {
        +int order_key PK
        +string order_id NK
        +datetime order_timestamp
        +string order_status
        +string traffic_source
        +string promo_code
    }

  
    class MART_DAILY_SALES {
        +int date_key FK
        +int product_key FK
        +int location_key FK
        +int total_orders
        +int total_quantity
        +decimal total_revenue
        +decimal avg_order_value
        +int unique_customers
    }


    class MART_CUSTOMER_year {
        +int customer_key FK
        +int total_orders
        +decimal total_spend
        +decimal avg_order_value
        +int total_sessions
        +int total_product_views
    }



    FACT_SALES --> DIM_ORDER : order_key
    FACT_SALES --> DIM_CUSTOMER : customer_key
    FACT_SALES --> DIM_PRODUCT : product_key
    FACT_SALES --> DIM_DATETIME : date_key
    FACT_SALES --> DIM_LOCATION : location_key
    FACT_PAYMENTS --> DIM_ORDER : order_key
    FACT_PAYMENTS --> DIM_CUSTOMER : customer_key
    FACT_PAYMENTS --> DIM_DATETIME : date_key
    FACT_USER_SESSIONS --> DIM_CUSTOMER : customer_key
    FACT_USER_SESSIONS --> DIM_DATETIME : date_key
    DIM_DATETIME --> MART_DAILY_SALES : date_key
    DIM_PRODUCT --> MART_DAILY_SALES : product_key
    DIM_LOCATION --> MART_DAILY_SALES : location_key

    
    DIM_CUSTOMER --> MART_CUSTOMER_year : customer_key
    

    class FACT_SALES:::Aqua
    class FACT_PAYMENTS:::Pine
    class FACT_USER_SESSIONS:::Sky
    class MART_DAILY_SALES:::Rose
    class MART_CUSTOMER_year:::Rose

    classDef Rose :,stroke-width:2px, stroke-dasharray:5 5, stroke:#FF5978, fill:#FFDFE5, color:#8E2236
    classDef Aqua :,stroke-width:1px, stroke-dasharray:none, stroke:#46EDC8, fill:#DEFFF8, color:#378E7A
    classDef Sky :,stroke-width:1px, stroke-dasharray:none, stroke:#374D7C, fill:#E2EBFF, color:#374D7C
    classDef Pine :,stroke-width:1px, stroke-dasharray:none, stroke:#254336, fill:#27654A, color:#FFFFFF













-- url: https://www.mermaidchart.com/app/projects/ec42b6ca-7e38-4532-a023-87383bb4875c/diagrams/fe349ef4-9577-4823-ad8b-052b4b51e205/share/invite/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkb2N1bWVudElEIjoiZmUzNDllZjQtOTU3Ny00ODIzLWFkOGItMDUyYjRiNTFlMjA1IiwiYWNjZXNzIjoiRWRpdCIsImlhdCI6MTc2MzE4OTczNH0.A2OVMKFMdHrO-mAn2i0D9_41yLTHH2WZLvfzE3pJ9WQ
